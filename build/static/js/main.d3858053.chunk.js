(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{126:function(e,t,a){e.exports=a.p+"static/media/account.74325722.svg"},127:function(e,t,a){e.exports=a.p+"static/media/add.a8e1ea22.svg"},132:function(e,t,a){e.exports=a.p+"static/media/title.26018783.svg"},133:function(e,t,a){e.exports=a.p+"static/media/person.94d6b2da.svg"},134:function(e,t,a){e.exports=a.p+"static/media/time.2ddfb7ab.svg"},135:function(e,t,a){e.exports=a.p+"static/media/location.0df9a860.svg"},136:function(e,t,a){e.exports=a.p+"static/media/404.ccee8dac.svg"},139:function(e,t,a){e.exports=a(324)},148:function(e,t,a){},217:function(e,t,a){},219:function(e,t,a){},290:function(e,t,a){},292:function(e,t,a){},294:function(e,t,a){},318:function(e,t,a){},320:function(e,t,a){},322:function(e,t,a){},324:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(11),s=a.n(o),c=a(20),i=(a(148),a(13)),u=a(14),l=a(16),m=a(15),d=a(17),p=a(327),h=a(328),f=a(7),v=a.n(f),b=a(24),g=a(12),E=a(329),y=a(326),k=function(e){return{type:"SET_LOGIN_STATUS",payload:e}},O=function(e){return{type:"UPDATE_USER_INFO",payload:e}},N=function(e){return{type:"UPDATE_TO_DO_LIST_INFO",payload:e}},w=function(e){return{type:"SET_REFRESH_HOME",payload:e}},j=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){var e=Object(g.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.props.userInfo.timer-Date.now()>1296e6?this.props.dispatchLoginStatue(!1):localStorage.setItem("userInfo",JSON.stringify(Object(b.a)({},this.props.userInfo,{timer:Date.now()})));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.location,a=e.config,n=e.loginStatus,o=t.pathname,s=a.find(function(e){return e.path===o});if(s&&!s.auth&&!n){var c=s.component;return r.a.createElement(E.a,{exact:!0,path:o,component:c})}return n?"/login"===o?r.a.createElement(y.a,{to:"/"}):s?r.a.createElement(E.a,{path:o,component:s.component}):r.a.createElement(y.a,{to:"/error"}):s&&s.auth?r.a.createElement(y.a,{to:"/login"}):r.a.createElement(y.a,{to:"/error"})}}]),t}(n.Component);var S=Object(c.b)(function(e){return{loginStatus:e.loginStatus,userInfo:e.userInfo}},function(e){return{dispatchUserInfo:function(t){return e(O(t))},dispatchLoginStatue:function(t){return e(k(t))}}})(j),I=(a(153),a(122)),T=a.n(I),D=(a(200),a(124)),x=a.n(D),C=(a(206),a(95)),L=a.n(C),H=a(96);function R(e){var t=e;return 1==="".concat(t).length&&(t="0".concat(t)),t}var _={telephoneVerfication:function(e){return/^1[3|4|5|7|8]\d{9}$/.test(e)},idCardVerfication:function(e){return/^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$|^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$/.test(e)},timeStampChangeDate:function(e){var t=new Date(e),a=t.getFullYear(),n=R(t.getMonth()+1),r=R(t.getDate()),o=R(t.getHours()),s=R(t.getMinutes());return"".concat(a,"-").concat(n,"-").concat(r," ").concat(o,":").concat(s)},dateChangeTimeStamp:function(e){return Date.parse(e)}},P=(a(217),function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"loading"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))}}]),t}(n.Component));a(219);var U=a(126),F=a.n(U),M=a(127),B=a.n(M),q=(a(57),a(29)),A=a.n(q),W=a(49),Y=a.n(W),z="5CW35y2KTJYTv0KNyOroNiSX-gzGzoHsz",J="8ANucFphKiNKO7BviHBBDCyl",V=(Y.a.Query,Y.a.User,z),K=J;Y.a.init({appId:V,appKey:K});var Q=Y.a,$=(Q.Query,Q.User),G=10;function X(e){return Z.apply(this,arguments)}function Z(){return(Z=Object(g.a)(v.a.mark(function e(t){var a,n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.method,e.prev=1,e.next=4,a;case 4:return n=e.sent,e.abrupt("return",n);case 8:e.prev=8,e.t0=e.catch(1),e.t0.message.indexOf("Username has already been taken.")>=0?A.a.info("\u7528\u6237\u540d\u5df2\u7ecf\u88ab\u5360\u7528",2):console.error("api error",e.t0.message);case 11:case"end":return e.stop()}},e,this,[[1,8]])}))).apply(this,arguments)}function ee(){return(ee=Object(g.a)(v.a.mark(function e(t){var a,n,r,o,s,c,i,u,l,m;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.userId,n=t.searchTitle,r=void 0===n?"":n,o=t.pageNo,c=((s=void 0===o?1:o)-1)*G,(i=new Q.Query("ToDoList")).equalTo("userId",a),i.contains("title",r),i.limit(G),i.skip(c),e.next=9,X({method:i.count()});case 9:return u=e.sent,l={count:u,pageNo:s,totalPage:Math.ceil(u/G)},e.next=13,X({method:i.find()});case 13:return m=e.sent,e.abrupt("return",{pageObj:l,list:m});case 15:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function te(){return(te=Object(g.a)(v.a.mark(function e(t){var a,n,r,o;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.userId,(n=new Q.Query("ToDoList")).equalTo("userId",a),n.equalTo("status",0),e.next=6,X({method:n.count()});case 6:return r=e.sent,n.equalTo("status",1),e.next=10,X({method:n.count()});case 10:return o=e.sent,e.abrupt("return",{todoCount:r,completeCount:o});case 12:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var ae={login:function(e){var t=e.username,a=e.password;return X({method:$.logIn(t,a)})},getToDoList:function(e){return ee.apply(this,arguments)},signup:function(e){var t=e.username,a=e.password,n=new Q.User;return n.setUsername(t),n.setPassword(a),X({method:n.signUp()})},addTodo:function(e){var t=e.content,a=e.location,n=e.person,r=e.time,o=e.title,s=e.userId,c=e.status,i=new(Q.Object.extend("ToDoList"));return i.set("content",t),i.set("location",a),i.set("person",n),i.set("time",r),i.set("title",o),i.set("userId",s),i.set("status",c),X({method:i.save()})},getEventCount:function(e){return te.apply(this,arguments)},getEventDetail:function(e){var t=e.eventId,a=new Q.Query("ToDoList");return a.equalTo("objectId",t),X({method:a.find()})},completeEvent:function(e){var t=Q.Object.createWithoutData("ToDoList",e);return t.set("status",1),X({method:t.save()})},deleteEvent:function(e){return X({method:Q.Object.createWithoutData("ToDoList",e).destroy()})},logout:function(){return X({method:Q.User.logOut()})}},ne=function(e){function t(){var e;Object(i.a)(this,t),e=Object(l.a)(this,Object(m.a)(t).call(this));var a=new L.a.DataSource({getRowData:function(e,t,a){return e[a]},getSectionHeaderData:function(e,t){return e[t]},rowHasChanged:function(e,t){return e!==t},sectionHeaderHasChanged:function(e,t){return e!==t}});return e.state={dataSource:a,modalVisible:!1},e}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){!function(){var e={scroller:null,posY:0,scrollY:0,maxscroll:0};function t(){return/iPhone|iPod|iPad/i.test(navigator.userAgent)&&"hidden"===document.body.style.overflow&&document.querySelectorAll(".am-modal").length>0}document.body.addEventListener("touchstart",function(a){if(t()){var n=function(e,t){for(var a=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector;e;){if(a.call(e,t))return e;e=e.parentElement}return null}(a.target,".scroller");n&&(e.scroller=n,e.posY=a.touches[0].pageY,e.scrollY=n.scrollTop,e.maxscroll=n.scrollHeight-n.clientHeight)}},{passive:!1}),document.body.addEventListener("touchmove",function(a){if(t()){if(!e.scroller)return a.preventDefault();var n=e.scroller.scrollTop,r=a.touches[0].pageY-e.posY;return r>0&&0===n?a.preventDefault():r<0&&n+1>=e.maxscroll?a.preventDefault():void 0}},{passive:!1}),document.body.addEventListener("touchend",function(a){t()&&(e.scroller=null,e.maxscroll=0)},{passive:!1})}()}},{key:"componentDidMount",value:function(){var e=Object(g.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({dataSource:this.state.dataSource.cloneWithRowsAndSections({"S0, R0":"S0, R0","Section 0":"Section 0"},["Section 0"],[["S0, R0"]])}),!this.props.refreshHome){e.next=7;break}return e.next=4,this.props.dispatchToDoListInfo({toDoList:[],totalPage:1,pageNo:1});case 4:return e.next=6,this.getToDoList(1);case 6:this.props.dispatchRefreshHome(!1);case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getToDoList",value:function(){var e=Object(g.a)(v.a.mark(function e(t){var a,n,r,o,s,c,i,u,l;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.props.toDoListInfo,n=a.toDoList,r=a.searchTitle,o=JSON.parse(localStorage.getItem("userInfo")),s=o.userId,e.next=4,ae.getToDoList({userId:s,searchTitle:r,pageNo:t});case 4:(c=e.sent)&&(i=c.pageObj,u=i.totalPage,l=i.pageNo,c.list.forEach(function(e){var t=e.id,a=e.attributes,r=a.content,o=a.location,s=a.person,c=a.status,i=a.title,u=a.time,l=a.userId,m=_.timeStampChangeDate(u),d=Object.assign({},{id:t,content:r,location:o,person:s,status:c,title:i,createTime:m,userId:l});n.push(d)}),this.props.dispatchToDoListInfo({toDoList:n,totalPage:u,pageNo:l,searchTitle:r}));case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"skip",value:function(e,t){var a="/".concat(e);"detail"===e&&t&&(a="/".concat(e,"?id=").concat(t)),this.props.history.push(a)}},{key:"testModal",value:function(){this.setState({modalVisible:!0})}},{key:"onClose",value:function(){this.setState({modalVisible:!1})}},{key:"searchEvent",value:function(){var e=Object(g.a)(v.a.mark(function e(){var t,a,n=arguments;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=n.length>0&&void 0!==n[0]?n[0]:void 0)){e.next=9;break}return(a=this.props.toDoListInfo).toDoList=[],a.searchTitle="clear"===t?"":t,e.next=7,this.props.dispatchToDoListInfo(a);case 7:return e.next=9,this.getToDoList(1);case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"onScrollHandle",value:function(){}},{key:"renderSectionHeaderTemplate",value:function(){var e=this;return r.a.createElement(H.Sticky,null,function(t){var a=t.style;return r.a.createElement("div",{className:"sticky",style:Object(b.a)({},a,{zIndex:3})},r.a.createElement("div",{className:"home-content-search"},r.a.createElement(x.a,{ref:function(t){return e.autoFocusInst=t},placeholder:"\u8bf7\u8f93\u5165\u8981\u641c\u7d22\u7684 title",cancelText:" ",onClear:e.searchEvent.bind(e,"clear"),onSubmit:e.searchEvent.bind(e)})))})}},{key:"cardTemplate",value:function(){var e=this;return r.a.createElement("div",{className:"home-content-main"},r.a.createElement("div",{className:"home-add",onClick:this.skip.bind(this,"create")},r.a.createElement("img",{src:B.a,className:"home-add-icon",alt:"add"})),r.a.createElement("div",{className:"home-test",onClick:this.testModal.bind(this)},"test"),r.a.createElement("div",{className:"home-content-main-card",onClick:this.skip.bind(this,"account")},r.a.createElement("div",{className:"home-content-main-card-avatar"},r.a.createElement("img",{src:F.a,className:"home-content-main-card-avatar-icon",alt:"logo"})),r.a.createElement("div",{className:"home-content-main-card-username"},this.props.userInfo.username)),r.a.createElement(T.a,{visible:this.state.modalVisible,transparent:!0,maskClosable:!1,onClose:this.onClose.bind(this),title:"\u6d4b\u8bd5 Modal",footer:[{text:"Ok",onPress:function(){e.onClose()}}]},r.a.createElement("div",{style:{height:100,overflow:"scroll"}},"\u8fd9\u662f\u6d4b\u8bd5")))}},{key:"renderFooterTemplate",value:function(){var e=this.props.toDoListInfo,t=e.totalPage,a=e.pageNo;return t&&a!==t?r.a.createElement("div",{className:"home-footer"},r.a.createElement(P,null)):r.a.createElement("div",{className:"home-footer no-data"},"\u6ca1\u6709\u66f4\u591a\u4e86")}},{key:"renderRowTemplate",value:function(){var e=this;return!(!this.props.toDoListInfo||!this.props.toDoListInfo.toDoList.length)&&this.props.toDoListInfo.toDoList.map(function(t){return r.a.createElement("div",{className:"home-content-list-item",key:t.id,onClick:e.skip.bind(e,"detail",t.id)},r.a.createElement("div",{className:"home-content-list-item-main"},r.a.createElement("div",{className:"home-content-list-item-main-title"},t.title),r.a.createElement("div",{className:"home-content-list-item-main-status",style:t.status?{backgroundColor:"#00f"}:{backgroundColor:"#f00"}})),r.a.createElement("div",{className:"home-content-list-item-basic"},r.a.createElement("div",{className:"home-content-list-item-basic-time"},t.createTime),r.a.createElement("div",{className:"home-content-list-item-basic-location"},t.location)))})}},{key:"onEndReached",value:function(){var e=this.props.toDoListInfo,t=e.totalPage;e.pageNo!==t&&this.getToDoList(this.props.toDoListInfo.pageNo+1)}},{key:"render",value:function(){var e=this;return r.a.createElement(L.a,{ref:function(t){return e.lv=t},dataSource:this.state.dataSource,className:"am-list sticky-list home scroller",renderSectionWrapper:function(e){return r.a.createElement(H.StickyContainer,{key:"".concat(e),className:"sticky-container",style:{zIndex:4}})},renderSectionHeader:this.renderSectionHeaderTemplate.bind(this),renderHeader:this.cardTemplate.bind(this),renderFooter:this.renderFooterTemplate.bind(this),renderRow:this.renderRowTemplate.bind(this),onScroll:this.onScrollHandle.bind(this),onEndReached:this.onEndReached.bind(this),pageSize:4,scrollEventThrottle:200,onEndReachedThreshold:100,useBodyScroll:!0})}}]),t}(n.Component);var re=Object(c.b)(function(e){return{loginStatus:e.loginStatus,userInfo:e.userInfo,toDoListInfo:e.toDoListInfo,refreshHome:e.refreshHome}},function(e){return{dispatchLoginStatue:function(t){return e(k(t))},dispatchToDoListInfo:function(t){return e(N(t))},dispatchRefreshHome:function(t){return e(w(t))}}})(ne),oe=(a(58),a(23)),se=a.n(oe),ce=(a(47),a(25)),ie=a.n(ce),ue=(a(114),a(37)),le=a.n(ue),me=a(67),de=a(65),pe=a.n(de),he=(a(290),function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(m.a)(t).call(this))).state={},e}return Object(d.a)(t,e),Object(u.a)(t,[{key:"login",value:function(){var e=Object(g.a)(v.a.mark(function e(t){var a=this;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.props.form.validateFields(function(){var e=Object(g.a)(v.a.mark(function e(n,r){var o,s,c,i,u,l;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=3;break}return A.a.fail("\u8bf7\u586b\u5199\u5b8c\u6574\u4fe1\u606f",1),e.abrupt("return");case 3:return o=r.username,s=r.password,c="login"===t?"login":"signup",e.next=8,ae[c]({username:o,password:s});case 8:(i=e.sent)&&(u=i.id,l=i.attributes.username,a.props.dispatchUserInfo(Object(b.a)({},a.props.userInfo,{userId:u,username:l})),localStorage.removeItem("userInfo"),localStorage.setItem("userInfo",JSON.stringify({userId:u,username:l,timer:Date.now()})),a.props.dispatchLoginStatue(!0),a.props.history.push("/"));case 10:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.form.getFieldProps;return r.a.createElement("div",{className:"login"},r.a.createElement("div",{className:"login-logo-wrapper"},r.a.createElement("img",{src:pe.a,className:"login-logo",alt:"logo"})),r.a.createElement("div",{className:"login-form"},r.a.createElement(ie.a,{className:"login-form-row"},r.a.createElement(le.a,Object.assign({},e("username",{rules:[{required:!0}]}),{maxLength:"10",placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"}))),r.a.createElement(ie.a,{className:"login-form-row"},r.a.createElement(le.a,Object.assign({},e("password",{rules:[{required:!0}]}),{type:"password",maxLength:"16",placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801"})))),r.a.createElement("div",{className:"login-submit"},r.a.createElement(se.a,{className:"submit-button submit-signup",activeClassName:"submit-button-active",onClick:this.login.bind(this,"signup")},"\u6ce8\u518c"),r.a.createElement(se.a,{className:"submit-button submit-login",activeClassName:"submit-button-active",onClick:this.login.bind(this,"login")},"\u767b\u5f55")))}}]),t}(n.Component));var fe=Object(me.a)()(Object(c.b)(function(e){return{loginStatus:e.loginStatus,userInfo:e.userInfo}},function(e){return{dispatchLoginStatue:function(t){return e(k(t))},dispatchUserInfo:function(t){return e(O(t))}}})(he)),ve=(a(292),a(66)),be=a.n(ve),ge=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(m.a)(t).call(this))).state={eventId:"",eventDetail:[],title:"",status:0},e}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(g.a)(v.a.mark(function e(){var t,a,n,r,o,s,c,i,u,l,m,d,p,h,f,b;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.location.href.split("?")[1].split("&")[0].split("=")[1],e.next=3,ae.getEventDetail({eventId:t});case 3:(a=e.sent)&&(n=a[0],r=n.attributes,o=r.content,s=r.location,c=r.person,i=r.status,u=r.time,l=r.title,m=n.createdAt,d=n.updatedAt,p=_.timeStampChangeDate(u),h=_.timeStampChangeDate(_.dateChangeTimeStamp(m)),f=_.timeStampChangeDate(_.dateChangeTimeStamp(d)),b=[{title:"\u4e8b\u4ef6\u65f6\u95f4",content:p},{title:"\u4e8b\u4ef6\u5730\u70b9",content:s},{title:"\u76f8\u5173\u4eba\u7269",content:c},{title:"\u4e8b\u4ef6\u72b6\u6001",content:i?"\u5df2\u5b8c\u6210":"\u672a\u5b8c\u6210"},{title:"\u521b\u5efa\u65f6\u95f4",content:h},{title:"\u66f4\u65b0\u65f6\u95f4",content:f}],this.setState({title:l,status:i,eventDetail:b,eventId:t,content:o}));case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"completeEvent",value:function(){var e=Object(g.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae.completeEvent(this.state.eventId);case 2:if(!e.sent){e.next=8;break}return A.a.success("\u606d\u559c\uff01\u4e8b\u4ef6\u5df2\u5b8c\u6210\uff01",2),e.next=7,this.props.dispatchRefreshHome(!0);case 7:this.goBackToHome();case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"deleteEvent",value:function(){var e=Object(g.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae.deleteEvent(this.state.eventId);case 2:if(!e.sent){e.next=8;break}return A.a.success("\u4e8b\u4ef6\u5df2\u5220\u9664\uff01",1),e.next=7,this.props.dispatchRefreshHome(!0);case 7:this.goBackToHome();case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"goBackToHome",value:function(){this.props.history.push("/")}},{key:"render",value:function(){return r.a.createElement("div",{className:"detail"},r.a.createElement("div",{className:"detail-header"},r.a.createElement("div",{className:"detail-header-back",onClick:this.goBackToHome.bind(this)},r.a.createElement("img",{src:be.a,className:"detail-header-back-icon",alt:"back"})),r.a.createElement("div",{className:"detail-header-title"},this.state.title)),r.a.createElement("div",{className:"detail-content"},this.state.eventDetail.map(function(e){return r.a.createElement("div",{className:"detail-content-item",key:e.title},r.a.createElement("div",{className:"detail-content-item-title"},e.title),r.a.createElement("div",{className:"detail-content-item-text"},e.content))}),r.a.createElement("div",{className:"detail-content-text"},this.state.content)),r.a.createElement("div",{className:"detail-action"},this.state.status?"":r.a.createElement(se.a,{className:"detail-action-complete",onClick:this.completeEvent.bind(this)},"\u5b8c\u6210"),r.a.createElement(se.a,{className:"detail-action-delete",onClick:this.deleteEvent.bind(this)},"\u5220\u9664")))}}]),t}(n.Component);var Ee=Object(c.b)(function(e){return{refreshHome:e.refreshHome}},function(e){return{dispatchRefreshHome:function(t){return e(w(t))}}})(ge),ye=(a(294),function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(m.a)(t).call(this))).state={logoutStatus:!1},e}return Object(d.a)(t,e),Object(u.a)(t,[{key:"goBackToHome",value:function(){this.props.history.push("/")}},{key:"logout",value:function(){var e=Object(g.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({logoutStatus:!0}),e.next=3,ae.logout();case 3:e.sent&&(localStorage.removeItem("userInfo"),this.props.dispatchLoginStatue(!1),this.props.dispatchRefreshHome(!0),this.props.history.push("/login")),this.setState({logoutStatus:!1});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(g.a)(v.a.mark(function e(){var t,a,n,r;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.userInfo.userId,e.next=3,ae.getEventCount({userId:t});case 3:(a=e.sent)&&(n=a.todoCount,r=a.completeCount,this.setState({todoCount:n,completeCount:r}));case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"account"},r.a.createElement("div",{className:"account-main"},r.a.createElement("div",{className:"account-main-avatar"},r.a.createElement("img",{src:pe.a,className:"account-main-avatar-icon",alt:"logo"})),r.a.createElement("div",{className:"home-content-account-main-username"},this.props.userInfo.username)),r.a.createElement("div",{className:"account-content"},r.a.createElement("div",{className:"account-content-item"},r.a.createElement("div",{className:"account-content-item-title"},"\u672a\u5b8c\u6210\u4e8b\u4ef6\u6570\uff1a"),r.a.createElement("div",{className:"account-content-item-number"},this.state.todoCount)),r.a.createElement("div",{className:"account-content-item"},r.a.createElement("div",{className:"account-content-item-title"},"\u5df2\u5b8c\u6210\u4e8b\u4ef6\u6570\uff1a"),r.a.createElement("div",{className:"account-content-item-number"},this.state.completeCount))),r.a.createElement("div",{className:"account-action"},r.a.createElement(se.a,{className:"account-action-back",onClick:this.goBackToHome.bind(this)},"\u8fd4\u56de\u9996\u9875"),r.a.createElement(se.a,{className:"account-action-logout",disabled:this.state.logoutStatus,onClick:this.logout.bind(this)},"\u9000\u51fa\u767b\u5f55")))}}]),t}(n.Component));var ke=Object(c.b)(function(e){return{userInfo:e.userInfo,toDoListInfo:e.toDoListInfo}},function(e){return{dispatchLoginStatue:function(t){return e(k(t))},dispatchRefreshHome:function(t){return e(w(t))}}})(ye),Oe=(a(296),a(130)),Ne=a.n(Oe),we=(a(299),a(131)),je=a.n(we),Se=a(132),Ie=a.n(Se),Te=a(133),De=a.n(Te),xe=a(134),Ce=a.n(xe),Le=a(135),He=a.n(Le),Re=(a(318),function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(m.a)(t).call(this))).state={pageLoading:!1},console.log(e.props),e}return Object(d.a)(t,e),Object(u.a)(t,[{key:"goBackToHome",value:function(){this.props.history.push("/")}},{key:"addTodo",value:function(){var e=Object(g.a)(v.a.mark(function e(){var t=this;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.props.form.validateFields(function(){var e=Object(g.a)(v.a.mark(function e(a,n){var r,o,s,c,i,u,l;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=3;break}return A.a.fail("\u8bf7\u586b\u5199\u5b8c\u6574\u4fe1\u606f",1),e.abrupt("return");case 3:return t.setState({pageLoading:!0}),r=t.props.userInfo.userId,o=n.content,s=n.location,c=n.person,i=n.time,u=n.title,l=_.dateChangeTimeStamp(i),e.next=10,ae.addTodo({content:o,location:s,person:c,time:l,title:u,userId:r,status:0});case 10:if(!e.sent){e.next=16;break}return e.next=14,t.props.dispatchRefreshHome(!0);case 14:t.setState({pageLoading:!1}),t.props.history.push("/");case 16:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"pageLoadingTemplate",value:function(){return!!this.state.pageLoading&&r.a.createElement("div",{className:"page-loading"},r.a.createElement(P,null))}},{key:"render",value:function(){var e=this.props.form.getFieldProps;return r.a.createElement("div",{className:"create"},r.a.createElement("div",{className:"create-header"},r.a.createElement("div",{className:"create-header-back",onClick:this.goBackToHome.bind(this)},r.a.createElement("img",{src:be.a,className:"create-header-back-icon",alt:"back"})),r.a.createElement("div",{className:"create-header-title"},"\u6dfb\u52a0\u5f85\u529e")),r.a.createElement(ie.a,{className:"create-row"},r.a.createElement(le.a,e("title",{rules:[{required:!0}]}),r.a.createElement("div",{className:"create-row-label"},r.a.createElement("img",{src:Ie.a,className:"create-row-label-icon",alt:"title"}),"\u6807\u9898"))),r.a.createElement(ie.a,{className:"create-row"},r.a.createElement(le.a,e("person",{rules:[{required:!0}]}),r.a.createElement("div",{className:"create-row-label"},r.a.createElement("img",{src:De.a,className:"create-row-label-icon",alt:"person"}),"\u4eba\u7269"))),r.a.createElement(ie.a,{className:"create-row create-row-time"},r.a.createElement(je.a,e("time",{rules:[{required:!0}]}),r.a.createElement(ie.a.Item,{arrow:"horizontal"},r.a.createElement("div",{className:"create-row-label"},r.a.createElement("img",{src:Ce.a,className:"create-row-label-icon",alt:"time"}),"\u65f6\u95f4")))),r.a.createElement(ie.a,{className:"create-row"},r.a.createElement(le.a,e("location",{rules:[{required:!0}]}),r.a.createElement("div",{className:"create-row-label"},r.a.createElement("img",{src:He.a,className:"create-row-label-icon",alt:"location"}),"\u5730\u70b9"))),r.a.createElement(ie.a,{className:"create-row create-row-content"},r.a.createElement(Ne.a,Object.assign({},e("content",{rules:[{required:!0}]}),{rows:5,count:100}))),r.a.createElement("div",{className:"create-add-todo"},r.a.createElement(se.a,{className:"submit-button",activeClassName:"submit-button-active",onClick:this.addTodo.bind(this)},"\u6dfb\u52a0")),this.pageLoadingTemplate())}}]),t}(n.Component));var _e=Object(me.a)()(Object(c.b)(function(e){return{userInfo:e.userInfo}},function(e){return{dispatchRefreshHome:function(t){return e(w(t))}}})(Re)),Pe=(a(320),a(136)),Ue=a.n(Pe),Fe=[{path:"/",component:re,auth:!0},{path:"/login",component:fe},{path:"/detail",component:Ee,auth:!0},{path:"/error",component:function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(m.a)(t).call(this))).state={},e}return Object(d.a)(t,e),Object(u.a)(t,[{key:"goBackToHome",value:function(){this.props.history.push("/")}},{key:"render",value:function(){return r.a.createElement("div",{className:"error"},r.a.createElement("img",{src:Ue.a,className:"error-icon",alt:"404"}),r.a.createElement("div",{className:"error-tip"},"404\uff01\u62b1\u6b49\uff0c\u60a8\u67e5\u770b\u7684\u9875\u9762\u4e0d\u5b58\u5728\uff5e\uff5e"))}}]),t}(n.Component)},{path:"/account",component:ke,auth:!0},{path:"/create",component:_e,auth:!0}],Me=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(p.a,{basename:"/react-project/build/index.html"},r.a.createElement(h.a,null,r.a.createElement(S,{config:Fe})))}}]),t}(n.Component),Be=(a(322),function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(Me,null))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var qe=a(62),Ae=JSON.parse(window.localStorage.getItem("userInfo"))||{},We={loginStatus:!!Ae.userId,userInfo:Ae,toDoListInfo:{toDoList:[],totalPage:1,pageNo:1,searchTitle:void 0},refreshHome:!0},Ye=Object(qe.b)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"SET_LOGIN_STATUS":return Object(b.a)({},e,{loginStatus:n});case"UPDATE_USER_INFO":return Object(b.a)({},e,{userInfo:n});case"UPDATE_TO_DO_LIST_INFO":return Object(b.a)({},e,{toDoListInfo:n});case"SET_REFRESH_HOME":return Object(b.a)({},e,{refreshHome:n});default:return e}});s.a.render(r.a.createElement(c.a,{store:Ye},r.a.createElement(Be,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},65:function(e,t,a){e.exports=a.p+"static/media/logo.10995d31.svg"},66:function(e,t,a){e.exports=a.p+"static/media/back.d42052db.svg"}},[[139,2,1]]]);
//# sourceMappingURL=main.d3858053.chunk.js.map